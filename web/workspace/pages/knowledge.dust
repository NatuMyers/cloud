{>"partials/header"/}

{>"partials/nav"/}

<header class="bg-tint mb pt--x2 pb cf ovfh">
  <div class="cnt">
    {^params.category}
      <img src="/assets/icons/{pages.results[0].icon}.svg" width="60" class="mb bg-icon">
      <h1>{pages.results[0].title}</h1>
      <p class="normal mb--x2">{pages.results[0].excerpt}</p>

      <div class="grid">
        {#knowledge-categories.results}
          {>"partials/knowledge/list"/}
        {/knowledge-categories.results}
      </div>
    {:else}
      {#knowledge-categories.results}{@eq key=slug value=params.category}
        <img src="/assets/icons/{icon}.svg" width="60" class="mb bg-icon">
        <h1>{name}</h1>
        <p class="normal mb">{desc}</p>
      {/eq}{/knowledge-categories.results}
    {/params.category}
  </div>
</header>

<main class="mb--x2">
  <div class="cnt">
    <div class="hdr fm ttu mb">
      <h3><span>Latest articles</span></h3>
    </div>

    <div class="grid">
      {#articles.results}
        {>"partials/articles/list" 
          section="knowledge"
          category=knowledge-category[0].name 
          sub-category=web-service[0].name
          grid="3"
          size="3"
        /}
      {:else}
        <div class="col w-1-1 tac"><p>No articles yet.</p></div>
      {/articles.results}
    </div>

    {>"partials/pagination" ds=articles /}
  </div>
</main>

{>"partials/footer"/}
